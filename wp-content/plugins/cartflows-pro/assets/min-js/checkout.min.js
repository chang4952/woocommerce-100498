!function(u){var t=function(){if("true"==a()){u(".wcf-embed-checkout-form-two-step .wcf-embed-checkout-form-steps div.wcf-current").removeClass("wcf-current");var e=u(".wcf-embed-checkout-form-two-step .wcf-embed-checkout-form-nav-btns a").attr("href");function t(e){e.length&&(event.preventDefault(),u("html, body").stop().animate({scrollTop:e.offset().top},100))}"#customer_details"==e?(u(e).show(),t(u(".wcf-embed-checkout-form-nav")),u(".wcf-embed-checkout-form-two-step .wcf-product-option-wrap").hide(),u(".wcf-embed-checkout-form-two-step .wcf-order-wrap").hide(),u(".wcf-embed-checkout-form-two-step .wcf-embed-checkout-form-nav-btns").show(),u(".wcf-embed-checkout-form-two-step").find(".step-one").addClass("wcf-current"),u(".wcf-embed-checkout-form-two-step .woocommerce-form-coupon-toggle").hide()):".wcf-order-wrap"==e&&(u(e).show(),t(u(".wcf-embed-checkout-form-nav")),u(".wcf-embed-checkout-form-two-step .wcf-product-option-wrap").show(),u(".wcf-embed-checkout-form-two-step .wcf-embed-checkout-form-nav-btns").hide(),u(".wcf-embed-checkout-form-two-step").find(".step-two").addClass("wcf-current"),u(".wcf-embed-checkout-form-two-step .woocommerce-form-coupon-toggle").show(),u(".wcf-embed-checkout-form-two-step #customer_details").hide())}},o=function(){u(".wcf-embed-checkout-form-two-step .wcf-embed-checkout-form-steps a").on("click",function(e){if(e.preventDefault(),"true"==a()){var t=u(this),o=t.closest(".wcf-embed-checkout-form-two-step .wcf-embed-checkout-form-steps div");u(".wcf-embed-checkout-form-two-step .wcf-embed-checkout-form-steps div.wcf-current").removeClass("wcf-current"),o.addClass("wcf-current");var c=t.closest(".wcf-embed-checkout-form-two-step .wcf-embed-checkout-form-steps div a").attr("href");"#customer_details"==c?(u(c).show(),u(".wcf-embed-checkout-form-two-step .wcf-order-wrap").hide(),u(".wcf-embed-checkout-form-two-step .wcf-embed-checkout-form-nav-btns").show(),u(".wcf-embed-checkout-form-two-step .wcf-product-option-wrap").hide(),u(".wcf-embed-checkout-form-two-step .woocommerce-form-coupon-toggle").hide()):".wcf-order-wrap"==c&&(u(c).show(),u(".wcf-embed-checkout-form-two-step .wcf-embed-checkout-form-nav-btns").hide(),u(".wcf-embed-checkout-form-two-step .wcf-product-option-wrap").show(),u(".wcf-embed-checkout-form-two-step .woocommerce-form-coupon-toggle").show(),u(".wcf-embed-checkout-form-two-step #customer_details").hide())}})},c=function(){var e=u(".wcf-item-choose-options a"),d=u(".wcf-quick-view-wrapper");d.appendTo(document.body);var a=d.find(".wcf-quick-view-bg"),i=d.find("#wcf-quick-view-modal"),s=i.find("#wcf-quick-view-content"),o=i.find("#wcf-quick-view-close"),c=i.find(".wcf-content-main-wrapper");c.width(),c.height();e.off("click").on("click",function(e){e.preventDefault();var t=u(this),o=t.closest(".wcf-item");o.find(".wcf-item-selector input").is(":checked")||o.find(".wcf-item-selector input").trigger("click");var c=t.data("product");t.addClass("wcf-variation-popup-open"),i.hasClass("loading")||i.addClass("loading"),a.hasClass("wcf-quick-view-bg-ready")||a.addClass("wcf-quick-view-bg-ready"),u(document).trigger("wcf_quick_view_loading"),r(t,c)});var r=function(e,t){i.css("opacity",0),u.ajax({url:cartflows.ajax_url,data:{action:"wcf_woo_quick_view",product_id:t},dataType:"html",type:"POST",success:function(e){s.html(e),n()}})},n=function(){var e=s.find(".variations_form");if(e.trigger("check_variations"),e.trigger("reset_image"),!i.hasClass("open")){i.removeClass("loading").addClass("open");var t=l(),o=u("html");o.css("margin-right",t),o.addClass("wcf-quick-view-is-open")}var c=i.find(".variations_form");0<c.length&&"function"==typeof c.wc_variation_form&&(c.wc_variation_form(),c.find("select").change());var a=i.find(".wcf-qv-image-slider");1<a.find("li").length?a.flexslider({animation:"slide",start:function(e){setTimeout(function(){f(!0)},300)}}):setTimeout(function(){f(!0)},300),u(document).trigger("wcf_quick_view_loader_stop")},f=function(e){var t=s,o=t.find(".product .wcf-qv-image-slider").first().height(),c=t.find(".product .summary.entry-summary"),a=c.css("content");void 0!==a&&544==a.replace(/[^0-9]/g,"")&&0!=o&&null!==o?c.css("height",o):c.css("height",""),!0===e&&i.css("opacity",1)},l=function(){var e=u('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div>');u("body").append(e);var t=u("div",e).innerWidth();e.css("overflow-y","scroll");var o=u("div",e).innerWidth();return u(e).remove(),t-o};!function(){c.on("click",function(e){this===e.target&&t()}),u(document).keyup(function(e){27===e.keyCode&&t()}),o.on("click",function(e){e.preventDefault(),t()});var t=function(){a.removeClass("wcf-quick-view-bg-ready"),i.removeClass("open").removeClass("loading"),u("html").removeClass("wcf-quick-view-is-open"),u("html").css("margin-right",""),e.removeClass("wcf-variation-popup-open"),setTimeout(function(){s.html("")},600)}}(),window.addEventListener("resize",function(e){f()});function t(){d.off("click","#wcf-quick-view-content .single_add_to_cart_button").off("wcf_added_to_cart").on("click","#wcf-quick-view-content .single_add_to_cart_button",this.onAddToCart).on("wcf_added_to_cart",this.updateButton)}t.prototype.onAddToCart=function(e){e.preventDefault();var t=u(this).closest("form");if(!t[0].checkValidity())return t[0].reportValidity(),!1;var n=u(this),o=u('input[name="product_id"]').val()||"",c=u('input[name="variation_id"]').val()||"",f=u(".wcf-variation-popup-open"),a=f.closest(".wcf-qty-row").find(".wcf-qty-selection").val()||1;n.is(".single_add_to_cart_button")&&(n.removeClass("added"),n.addClass("loading"),""!=c&&jQuery.ajax({url:cartflows.ajax_url,type:"POST",data:"action=wcf_add_cart_single_product&product_id="+o+"&variation_id="+c+"&quantity="+a,success:function(e){if(result=e.data,result&&"yes"===result.added_to_cart){(f=u(".wcf-variation-popup-open")).closest(".wcf-item").find(".wcf-item-wrap").text(result.name),f.data("variation",result.variation_id);var t=f.closest(".wcf-qty-row"),o=t.find(".wcf-qty-selection"),c=o.data("options"),a=t.find(".wcf-price");c.variation_id=result.variation_id,o.data("options",c);var i=t.find(".wcf-item-selector");if(0<i.length){var s=i.find("input"),r=s.data("options");r.variation_id=result.variation_id,s.data("options",r)}"no"!=result.price&&a.find(".wcf-field-label").html(result.price)}u(document.body).trigger("wc_fragment_refresh"),d.trigger("wcf_added_to_cart",[n])}}))},t.prototype.updateButton=function(e,t){u("body").trigger("update_checkout"),o.trigger("click")},new t},a=function(){var e,t,o,c;e=u(".wcf-embed-checkout-form-two-step form.woocommerce-checkout .woocommerce-billing-fields").find('input[type="text"], input[type="tel"], input[type="email"], input[type="password"]'),t=u(".wcf-embed-checkout-form-two-step form.woocommerce-checkout .woocommerce-billing-fields").find(".select2"),o=u(".wcf-embed-checkout-form-two-step form.woocommerce-checkout .woocommerce-shipping-fields").find('input[type="text"], input[type="tel"], input[type="email"], input[type="password"]'),c=u(".wcf-embed-checkout-form-two-step form.woocommerce-checkout .woocommerce-shipping-fields").find(".select2");var a=u(".wcf-embed-checkout-form-two-step form.woocommerce-checkout").find('h3#ship-to-different-address input[type="checkbox"]:checked').val(),i="true",s="";return Array.from(e).forEach(function(e){var t=e.type,o=(e.name,e.closest(".form-row"));has_class=o.classList.contains("validate-required"),field_value=u.trim(e.value),has_class&&""==field_value?(e.classList.add("field-required"),i="false",""==s&&(s=e)):("email"==t&&0==/^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,14})$/.test(field_value)&&(e.classList.add("field-required"),i="false",""==s&&(s=e)),e.classList.remove("field-required"))}),Array.from(t).forEach(function(e){var t=e.closest(".form-row"),o=t.classList.contains("validate-required"),c=u.trim(t.querySelector(".select2-selection__rendered[title]"));name=t.querySelector("select").name,o&&""==c?(e.classList.add("field-required"),i="false",""==s&&(s=e)):e.classList.remove("field-required")}),1==a&&(Array.from(o).forEach(function(e){var t=e.type,o=(e.name,e.closest(".form-row"));has_class=o.classList.contains("validate-required"),field_value=u.trim(e.value),has_class&&""==field_value?(e.classList.add("field-required"),i="false",""==s&&(s=e)):("email"==t&&0==/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(field_value)&&(e.classList.add("field-required"),i="false",""==s&&(s=e)),e.classList.remove("field-required"))}),Array.from(c).forEach(function(e){var t=e.closest(".form-row"),o=t.classList.contains("validate-required"),c=u.trim(t.querySelector(".select2-selection__rendered[title]"));name=t.querySelector("select").name,whiteSpace=/\s/g.test(c),o&&""==c?(e.classList.add("field-required"),i="false",""==s&&(s=e)):e.classList.remove("field-required")})),""!=s&&s.focus(),i};u(document).ready(function(e){"yes"===cartflows.allow_autocomplete_zipcode&&function(){var i;u(document.body).on("textInput input change keypress paste","#billing_postcode, #shipping_postcode",function(e){var t=u(this),o=t.attr("id").split("_")[0],c=t.val().trim(),a=u("#"+o+"_country").val();""!==a&&""!==c&&(clearTimeout(i),i=setTimeout(function(){-1===["GB","CA"].indexOf(a)&&s(o,a,c)},800))});var s=function(o,e,t){u.ajax({url:"https://api.zippopotam.us/"+e+"/"+t,cache:!0,dataType:"json",type:"GET",success:function(e,t){u.each(e.places,function(e,t){return u("#"+o+"_city").val(this["place name"]).trigger("change"),u('[name="'+o+'_state"]:visible').val(this["state abbreviation"]).trigger("change"),!1})},error:function(e,t){}})}}(),u(document).on("change",".wcf-single-sel",function(){var e=u(this),t=e.data("options"),o=e.closest(".wcf-qty-row").find(".wcf-qty input").val(),c=jQuery("._wcf_checkout_id").val();t.qty=o,t.checkout_id=c,u.ajax({url:cartflows.ajax_url,data:{action:"wcf_single_selection",option:t},dataType:"json",type:"POST",success:function(e){u("body").trigger("update_checkout")}})}),u(document).on("change",".wcf-multiple-sel",function(){var e=u(".wcf-multiple-sel:checked"),t=u(this),o=t.data("options"),c=t.closest(".wcf-qty-row").find(".wcf-qty input").val();if(0==e.length)return t.attr("checked",!0),void t.attr("disabled",!0);1==e.length?e.attr("disabled",!0):e.removeAttr("disabled"),o.qty=c,o.checked="no",t.is(":checked")&&(o.checked="yes"),u.ajax({url:cartflows.ajax_url,data:{action:"wcf_multiple_selection",option:o},dataType:"json",type:"POST",success:function(e){u("body").trigger("update_checkout")}})}),u(document).on("change",".wcf-var-sel",function(){var e=u(this).closest(".wcf-qty-row").find(".wcf-qty input"),t=e.data("options"),o=e.val();t.qty=o,u.ajax({url:cartflows.ajax_url,data:{action:"wcf_variation_selection",option:t},dataType:"json",type:"POST",success:function(e){u("body").trigger("update_checkout")}})}),u(document).on("change",".wcf-qty-selection",function(){var e=u(this);if(wrap=e.closest(".wcf-qty-row"),item_selector=wrap.find(".wcf-item-selector"),0<item_selector.length){var t=item_selector.find("input");if(0<t.length&&!t.is(":checked"))return}var o=e.data("options"),c=e.val();o.qty=c,u.ajax({url:cartflows.ajax_url,data:{action:"wcf_quantity_update",option:o},dataType:"json",type:"POST",success:function(e){u("body").trigger("update_checkout")}})}),c(),function(){var c=!1;u(document).on("change",".wcf-bump-order-cb",function(e){if(!0===c)return!1;c=!0;var t=u(this),o=t.val();u("[name=_wcf_checkout_id]").val();return t.is(":checked")?(!0,u("[name=_wcf_bump_product]").val(o),u("[name=_wcf_bump_product_action]").val("add_bump_product")):(!1,u("[name=_wcf_bump_product]").val(""),u("[name=_wcf_bump_product_action]").val("remove_bump_product")),u(document.body).trigger("update_checkout",{update_shipping_method:!1}),c=!1}),u(document.body).on("updated_checkout",function(e,t){u("[name=_wcf_bump_product_action]").val("")})}(),function(){var e=u(".wcf-field-style-one form.woocommerce-checkout").find("input");u(e).each(function(e){var t=u(this),o=t.attr("type"),c=t.closest(".form-row");a(c.hasClass("mt20"),t.val(),o,c)});var t=u(".wcf-field-style-one form.woocommerce-checkout").find("select");function a(e,t,o,c){e&&c.removeClass("mt20"),(""!==t||" "!==t&&"select"===o)&&c.addClass("wcf-anim-label"),"hidden"===o&&(c.removeClass("wcf-anim-label"),c.addClass("wcf-anim-label-fix"))}u(t).each(function(e){var t=u(this),o=t.closest(".form-row");a(o.hasClass("mt20"),t.val(),"select",o)})}(),function(){var e=u(".wcf-field-style-one form.woocommerce-checkout").find("input"),t=u(".wcf-field-style-one form.woocommerce-checkout").find(".select2"),o=u(".wcf-field-style-one form.woocommerce-checkout").find("textarea");e.focus(function(){var e=u(this),t=e.closest(".form-row");has_class=t.hasClass("wcf-anim-label"),field_value=e.val(),""==field_value&&t.addClass("wcf-anim-label")}),e.focusout(function(){var e=u(this),t=e.closest(".form-row");has_class=t.hasClass("wcf-anim-label"),field_value=e.val(),""==field_value?t.removeClass("wcf-anim-label"):t.addClass("wcf-anim-label")}),t.click(function(){var e=u(this),t=e.closest(".form-row");has_class=t.hasClass("wcf-anim-label"),field_value=e.find(".select2-selection__rendered").text(),""==field_value&&t.addClass("wcf-anim-label")}),t.focusout(function(){var e=u(this),t=e.closest(".form-row");has_class=t.hasClass("wcf-anim-label"),field_value=e.find(".select2-selection__rendered").text(),""==field_value?t.removeClass("wcf-anim-label"):t.addClass("wcf-anim-label")}),o.click(function(){var e=u(this),t=e.closest(".form-row");has_class=t.hasClass("wcf-anim-label"),field_value=e.val(),""==field_value&&t.addClass("wcf-anim-label")}),o.focusout(function(){var e=u(this),t=e.closest(".form-row");has_class=t.hasClass("wcf-anim-label"),field_value=e.val(),""==field_value?t.removeClass("wcf-anim-label"):t.addClass("wcf-anim-label")})}(),0<e(".wcf-embed-checkout-form-two-step").length&&(o(),u(".wcf-embed-checkout-form-two-step  #customer_details").show(),u(".wcf-embed-checkout-form-two-step .woocommerce-form-coupon-toggle").hide(),u(".wcf-embed-checkout-form-two-step .wcf-product-option-wrap").hide(),u(".wcf-embed-checkout-form-two-step .wcf-embed-checkout-form-nav-btns").show(),u(".wcf-embed-checkout-form-two-step .wcf-embed-checkout-form-steps a").on("click",function(e){e.preventDefault(),o()}),u(".wcf-embed-checkout-form-two-step .wcf-embed-checkout-form-nav-btns a").on("click",function(e){e.preventDefault(),t()}))})}(jQuery);